{
  "type": "page",
  "body": [
    {
      "type": "flex",
      "direction": "row",
      "style": {
        "height": "100vh"
      },
      "items": [
        {
          "type": "wrapper",
          "size": "xs",
          "style": {
            "width": "280px",
            "minWidth": "280px",
            "borderRight": "1px solid #e8e9ea",
            "padding": "16px",
            "backgroundColor": "#f8f9fa"
          },
          "body": [
            {
              "type": "tpl",
              "tpl": "<h5 style='margin-bottom: 16px; color: #495057;'>æç¤ºè¯ç±»å‹</h5>"
            },
            {
              "type": "nav",
              "id": "typeNav",
              "stacked": true,
              "className": "type-nav",
              "style": {
                "border": "none"
              },
              "source": "get:/plugins/ai/ai_prompt/types",
              "onEvent": {
                "click": {
                  "actions": [
                    {
                      "actionType": "reload",
                      "componentId": "aiPromptCRUD",
                      "data": {
                        "prompt_type": "${event.data.item.value === 'all' ? '' : event.data.item.value}"
                      }
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "type": "wrapper",
          "size": "auto",
          "style": {
            "flex": "1",
            "padding": "16px"
          },
          "body": [
            {
              "type": "alert",
              "level": "info",
              "showIcon": true,
              "body": "ğŸ’¡ <strong>ä½¿ç”¨æç¤ºï¼š</strong>å»ºè®®å‚è€ƒå†…ç½®æç¤ºè¯è¿›è¡Œè°ƒæ•´ã€‚<p>$ {XX} ä¸ºå†…ç½®å‚æ•°ï¼Œå¯ä»¥è°ƒæ•´ä½ç½®ï¼Œä½†æ˜¯æ”¹ä¸ºå…¶ä»–å‚æ•°å¯èƒ½æ— æ³•æ­£ç¡®è¯†åˆ«ã€‚</p><p>æ¯ä¸ªç±»å‹åªèƒ½å¼€å¯ä¸€ä¸ªæç¤ºè¯</p>",
              "style": {
                "marginBottom": "16px"
              }
            },
            {
              "type": "crud",
              "id": "aiPromptCRUD",
              "name": "aiPromptCRUD",
              "autoFillHeight": true,
              "autoGenerateFilter": {
                "columnsNum": 3,
                "showBtnToolbar": false
              },
              "headerToolbar": [
                {
                  "type": "button",
                  "icon": "fas fa-plus text-primary",
                  "actionType": "drawer",
                  "label": "æ–°å»ºæç¤ºè¯",
                  "drawer": {
                    "closeOnEsc": true,
                    "closeOnOutside": true,
                    "size": "xl",
                    "title": "æ–°å»ºAIæç¤ºè¯ (ESC å…³é—­)",
                    "body": {
                      "type": "form",
                      "api": "post:/plugins/ai/ai_prompt/save",
                      "body": [
                        {
                          "type": "input-text",
                          "name": "name",
                          "label": "æç¤ºè¯åç§°",
                          "required": true,
                          "placeholder": "è¯·è¾“å…¥æç¤ºè¯åç§°",
                          "validateOnChange": true,
                          "validations": {
                            "minLength": 2,
                            "maxLength": 100
                          },
                          "validationErrors": {
                            "minLength": "æç¤ºè¯åç§°è‡³å°‘ 2 ä¸ªå­—ç¬¦",
                            "maxLength": "æç¤ºè¯åç§°æœ€å¤š 100 ä¸ªå­—ç¬¦"
                          }
                        },
                        {
                          "type": "input-text",
                          "name": "description",
                          "label": "æç¤ºè¯æè¿°",
                          "placeholder": "è¯·è¾“å…¥æç¤ºè¯æè¿°"
                        },
                        {
                          "type": "select",
                          "name": "prompt_type",
                          "label": "æç¤ºè¯ç±»å‹",
                          "required": true,
                          "source": "get:/plugins/ai/ai_prompt/types",
                          "placeholder": "è¯·é€‰æ‹©æç¤ºè¯ç±»å‹"
                        },
                        {
                          "type": "textarea",
                          "name": "content",
                          "label": "æç¤ºè¯å†…å®¹",
                          "required": true,
                          "placeholder": "è¯·è¾“å…¥æç¤ºè¯å†…å®¹ï¼Œæ”¯æŒå˜é‡æ›¿æ¢",
                          "minRows": 5,
                          "maxRows": 15
                        }
                      ],
                      "submitText": "ä¿å­˜",
                      "resetText": "é‡ç½®",
                      "messages": {
                        "saveSuccess": "ä¿å­˜æˆåŠŸ",
                        "saveFailed": "ä¿å­˜å¤±è´¥"
                      },
                      "onEvent": {
                        "submitSucc": {
                          "actions": [
                            {
                              "actionType": "reload",
                              "componentId": "aiPromptCRUD"
                            },
                            {
                              "actionType": "closeDrawer"
                            }
                          ]
                        }
                      }
                    }
                  }
                },
                "reload",
                "bulkActions",
                {
                  "type": "button",
                  "label": "é‡ç½®å†…ç½®æç¤ºè¯",
                  "actionType": "ajax",
                  "confirmText": "è¯¥æ“ä½œå°†å…ˆåˆ é™¤æ‰€æœ‰å†…ç½®æç¤ºè¯ï¼Œç„¶åé‡æ–°åŠ è½½å†…ç½®æç¤ºè¯ï¼Œç”¨æˆ·æ·»åŠ æç¤ºè¯ä¸å—å½±å“ã€‚æ˜¯å¦æ‰§è¡Œ?",
                  "api": "post:/plugins/ai/ai_prompt/load"
                }
              ],
              "loadDataOnce": false,
              "syncLocation": false,
              "initFetch": true,
              "perPage": 10,
              "bulkActions": [
                {
                  "label": "æ‰¹é‡åˆ é™¤",
                  "actionType": "ajax",
                  "confirmText": "ç¡®å®šè¦æ‰¹é‡åˆ é™¤?",
                  "api": "post:/plugins/ai/ai_prompt/delete/${ids}"
                }
              ],
              "footerToolbar": [
                {
                  "type": "pagination",
                  "align": "right"
                },
                {
                  "type": "statistics",
                  "align": "right"
                },
                {
                  "type": "switch-per-page",
                  "align": "right"
                }
              ],
              "api": "get:/plugins/ai/ai_prompt/list",
              "quickSaveItemApi": "/plugins/ai/ai_prompt/id/${id}/enabled/${is_enabled}",
              "columns": [
                {
                  "type": "operation",
                  "label": "æ“ä½œ",
                  "width": 120,
                  "buttons": [
                    {
                      "type": "button",
                      "icon": "fas fa-edit text-primary",
                      "actionType": "drawer",
                      "tooltip": "ç¼–è¾‘æç¤ºè¯",
                      "drawer": {
                        "closeOnEsc": true,
                        "closeOnOutside": true,
                        "size": "xl",
                        "title": "ç¼–è¾‘AIæç¤ºè¯ (ESC å…³é—­)",
                        "body": {
                          "type": "form",
                          "api": "post:/plugins/ai/ai_prompt/save",
                          "body": [
                            {
                              "type": "hidden",
                              "name": "id"
                            },
                            {
                              "type": "hidden",
                              "name": "is_enabled"
                            },
                            {
                              "type": "hidden",
                              "name": "is_builtin"
                            },
                            {
                              "type": "input-text",
                              "name": "name",
                              "label": "æç¤ºè¯åç§°",
                              "required": true,
                              "placeholder": "è¯·è¾“å…¥æç¤ºè¯åç§°",
                              "validateOnChange": true,
                              "validations": {
                                "minLength": 2,
                                "maxLength": 100
                              },
                              "validationErrors": {
                                "minLength": "æç¤ºè¯åç§°è‡³å°‘ 2 ä¸ªå­—ç¬¦",
                                "maxLength": "æç¤ºè¯åç§°æœ€å¤š 100 ä¸ªå­—ç¬¦"
                              }
                            },
                            {
                              "type": "input-text",
                              "name": "description",
                              "label": "æç¤ºè¯æè¿°",
                              "placeholder": "è¯·è¾“å…¥æç¤ºè¯æè¿°"
                            },
                            {
                              "type": "select",
                              "name": "prompt_type",
                              "label": "æç¤ºè¯ç±»å‹",
                              "required": true,
                              "source": "get:/plugins/ai/ai_prompt/types",
                              "placeholder": "è¯·é€‰æ‹©æç¤ºè¯ç±»å‹"
                            },
                            {
                              "type": "textarea",
                              "name": "content",
                              "label": "æç¤ºè¯å†…å®¹",
                              "required": true,
                              "placeholder": "è¯·è¾“å…¥æç¤ºè¯å†…å®¹ï¼Œæ”¯æŒå˜é‡æ›¿æ¢",
                              "minRows": 5,
                              "maxRows": 15
                            }
                          ],
                          "submitText": "ä¿å­˜",
                          "resetText": "é‡ç½®",
                          "messages": {
                            "saveSuccess": "ä¿å­˜æˆåŠŸ",
                            "saveFailed": "ä¿å­˜å¤±è´¥"
                          },
                          "onEvent": {
                            "submitSucc": {
                              "actions": [
                                {
                                  "actionType": "reload",
                                  "componentId": "aiPromptCRUD"
                                },
                                {
                                  "actionType": "closeDrawer"
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "name": "name",
                  "label": "æç¤ºè¯åç§°",
                  "type": "text",
                  "width": "180px"
                },
                {
                  "name": "description",
                  "label": "æç¤ºè¯æè¿°",
                  "type": "text",
                  "width": "200px"
                },
                {
                  "name": "prompt_type",
                  "label": "ç±»å‹",
                  "type": "mapping",
                  "source": "get:/plugins/ai/ai_prompt/types"
                },
                {
                  "name": "is_builtin",
                  "label": "å†…ç½®",
                  "type": "status",
                  "map": {
                    "true": {
                      "value": "æ˜¯",
                      "status": "success"
                    },
                    "false": {
                      "value": "å¦",
                      "status": "default"
                    }
                  },
                  "width": "80px"
                },
                {
                  "name": "is_enabled",
                  "label": "å¯ç”¨çŠ¶æ€",
                  "type": "switch",
                  "onText": "å¼€å¯",
                  "offText": "å…³é—­",
                  "quickEdit": {
                    "mode": "inline",
                    "type": "switch",
                    "onText": "å¼€å¯",
                    "offText": "å…³é—­",
                    "saveImmediately": true,
                    "resetOnFailed": true
                  },
                  "width": "100px"
                },
                {
                  "name": "created_at",
                  "label": "åˆ›å»ºæ—¶é—´",
                  "type": "datetime"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}